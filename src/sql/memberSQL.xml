<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="bengineer">
	<select id="beChecknickname" resultType="int" parameterType="string">
		select count(*) from bemember where nickname=#{nickname}
	</select>
	
	<select id="beChecklogin" resultType="int" parameterType="string">
		select count(*) from bemember where id=#{id}
	</select>
	
	<select id="beSelectmember" resultType="MemberDTO" parameterType="string">
		select * from bemember where id=#{id}
	</select>
	
	<select id="beSelectmember2" resultType="MemberDTO" parameterType="string">
		select * from bemember where email=#{email}
	</select>
	
	<select id="beSelectid" resultType="string" parameterType="string">
		select id from bemember where email=#{email}
	</select>
	
	<insert id="beInsertmember" parameterType="MemberDTO">
		insert into bemember(id,email,nickname,birthday,gender,chmod) values(#{id},#{email},#{nickname},#{birthday},#{gender},2)
	</insert>
	
	<insert id="beInsertmember2" parameterType="MemberDTO">
		insert into bemember(id,pw,email,nickname,birthday,gender) values(#{id},#{pw},#{email},#{nickname},#{birthday},#{gender})
	</insert>
	
	<update id="beUpdatenickname" parameterType="MemberDTO">
		update bemember set nickname = #{nickname}, pw = #{pw} where id=#{id}
	</update>
	
	<update id="beUpdatemember2" parameterType="MemberDTO">
		update bemember set id = #{id} where email=#{email}
	</update>

	<select id="imposeMember" parameterType="String" resultType="int">
		<![CDATA[
		SELECT count(*) FROM beimpose e, bemember m
		WHERE e.email = m.email
		and e.email in (select email from beimpose where sysdate < endDay and email = #{email})
		]]>
	</select>
	
	<select id="beCheckmailid" resultType="int" parameterType="string">
		select count(*) from bemember where email=#{email}
	</select>
	
	<select id="getnickname" parameterType="string" resultType="string">
		select nickname from BEmember where id = #{id}
	</select>
	
	<select id="getid" parameterType="string" resultType="string">
		select id from BEmember where nickname = #{nickname}
	</select>
	
	<select id="beSelectpw" resultType="string" parameterType="string">
		select pw from bemember where email=#{email}
	</select>
</mapper>